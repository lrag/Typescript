<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<script type="application/javascript">

let numeros = [11,22,33,44,55,66,77,88,99]

var numero = 5
var numero = 10
console.log(numero)

function f1(elemento){
    console.log(elemento)
}

function f2(elemento, indice){
    //console.log("("+indice+") Creando fila para :"+elemento)
    console.log(`(${indice}) Creando fila para : ${elemento}`)
}

let f3 = function hola(){
    console.log("f3, arguments: ", arguments)
}

numeros.forEach(f1)
numeros.forEach(f2)
numeros.forEach(f3)

/////////////
// forEach //
/////////////
console.log('-----------------------------------')
let array2 = ["a","b","c","d","e"]
function nuestroForEach(callback){

    for(transit=0; transit<array2.length; transit++){
        let elemento = array2[transit]
        callback(elemento)
    }

}

function sacarPorConsola(elemento){
    console.log(elemento)
}
function crearFila(elemento){
    console.log("creando fila para el elemento: "+elemento)
}

nuestroForEach(sacarPorConsola)
nuestroForEach(crearFila)

//////////
// sort //
//////////
console.log('-----------------------------------')
let array3 = [9,1,8,2,7,3,6,4,6,5]

let ascendente = function(elem1, elem2){
    if(elem1<elem2){
        return -1
    } else if(elem1>elem2){
        return 1
    } else {
        return 0
    }
}
let descendente = function(elem1, elem2){
    if(elem1<elem2){
        return 1
    } else if(elem1>elem2){
        return -1
    } else {
        return 0
    }
}

console.log(array3)
array3.sort(ascendente)
console.log(array3)
array3.sort(descendente)
console.log(array3)

let array4 = [ "uno", "dos", "tres", "cuatro", "movida", "tocotó", "esternocleidomastoideo" ]
let longitud = function(elem1, elem2){
    if(elem1.length<elem2.length){
        return -1
    } else if(elem1.length>elem2.length){
        return 1
    } else {
        return 0
    }
}

console.log(array4)
//array4.sort(longitud)
array4.sort( (e1, e2) => e1.length-e2.length )
console.log(array4)

//////////
// find //
//////////
console.log('-----------------------------------')
let peliculas = [
        { 
          titulo   : 'Alien',
          director : 'Ridley Scott',
          genero   : 'Ci-Fi',
        },
        { 
          titulo   : 'Cazafantasmas',
          director : 'Ivan Reitman',
          genero   : 'Estupenda' 
        },
        { 
          titulo   : 'Marea roja',
          director : 'Tony Scott',
          genero   : 'Submarinos' 
        },
        { 
          titulo   : 'Don erre que erre',
          director : 'Jose Luis Saez de Heredia',
          genero   : "Comedia"
        }
    ]

let titulo = "Marea roja"
let funcion = function(elemento){
    return elemento.titulo == titulo
} 
let peliculaEncontrada = peliculas.find(funcion)
console.log("Pelicula:", peliculaEncontrada)

////////////
// filter //
////////////
console.log('-----------------------------------')
let palabras = ["HELLO","DOCTOR","NAME","CONTINUE","YESTERDAY","TOMORROW"]
let palabraBorrar = "NAME"
console.log(palabras)
//Filter crea un nuevo array con los elementos que pasen el filtro
palabras2 = palabras.filter(function(elem){
    return elem != palabraBorrar
})
console.log(palabras2)



/*
let numerines = [ 1,2,3,4,5,6 ]

let funcionX = function(elem){
    return elem % 2 == 0
}

console.log(filter_(function(elem){
    return elem % 2 != 0
}))

console.log(filter_( elem => elem % 2 != 0 ))

function filter_(funcionDeFiltrado){
    let otroArray = []
    for(a=0; a<numerines.length; a++){
        num = numerines[a]
        if(funcionDeFiltrado(num)){
            otroArray.push(num)
        }
    }
    return otroArray
}
*/


/////////
// map //
/////////
console.log('-----------------------------------')
//Map recibe una función a la que se le pasará cada uno de los elementos y debe devolver un valor
//Ese valor devuelto se va recopilando en un nuevo array
numeros = [1,2,3,4,5,6,7,8,9]
let numeros2 = numeros.map(function(e){
    return e*10
})
console.log(numeros2)

let palabrasMin = palabras.map(function(palabra){
    return palabra.toLowerCase()
})
console.log(palabrasMin)

////////////
// reduce //
////////////
console.log('-----------------------------------')
//tomando un array con x elementos lo reduce a uno solo
//Ese elemento representará de alguna manera al array

let datos = [10,20,30,40,50,60,70,80,90]

let suma = datos.reduce(function(acumulador, elemento){
        return acumulador+elemento
    }, 0)
console.log(suma)

let coches = [ 'fiat', 'ford', 'seat', 'renault', 'ford', 'renault', 'seat', 'renault' ]
/*
queremos saber cuántos coches hay de cada marca. Por ejemplo:
{
    fiat : 1,
    ford : 2,
    seat : 2,
    renault : 3
}
*/

let resultado = coches.reduce(function(acumulador, e){
        if(acumulador[e]){
            acumulador[e] += 1
        } else {
            acumulador[e] = 1
        }
        return acumulador
    }, {})
console.log(resultado)    

///////////////////////////////////////////////////
// Algunas de estas llamadas se pueden encadenar //
///////////////////////////////////////////////////

datos = [ 'aaa','ggg','bbb','a','b','ñññ','ccc','ddd','f']

let datos2 = datos
    .filter(e => e.length>2)
    .sort((e1,e2) => {
        if(e1<e2){
            return -1
        } else if(e1>e2){
            return 1
        } else {
            return 0
        }
    })
    .map(e => e.toUpperCase())
    .map(e => e+e)

console.log(datos2)    

</script>

<body>

    <h1 id="movida"></h1>
    
</body>

</html>
